<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>routes.util – URL Generator and utility functions &mdash; Routes 1.13 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Routes 1.13 documentation" href="../index.html" />
    <link rel="up" title="Routes Modules" href="index.html" />
    <link rel="prev" title="routes.middleware – Routes WSGI Middleware" href="middleware.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="middleware.html" title="routes.middleware – Routes WSGI Middleware"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Routes 1.13 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Routes Modules</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-routes.util">
<span id="routes-util-url-generator-and-utility-functions"></span><h1><a class="reference internal" href="#module-routes.util" title="routes.util"><code class="xref py py-mod docutils literal"><span class="pre">routes.util</span></code></a> &#8211; URL Generator and utility functions<a class="headerlink" href="#module-routes.util" title="Permalink to this headline">¶</a></h1>
<p>Utility functions for use in templates / controllers</p>
<p><em>PLEASE NOTE</em>: Many of these functions expect an initialized RequestConfig
object. This is expected to have been initialized for EACH REQUEST by the web
framework.</p>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="routes.util.RoutesException">
<em class="property">exception </em><code class="descclassname">routes.util.</code><code class="descname">RoutesException</code><a class="headerlink" href="#routes.util.RoutesException" title="Permalink to this definition">¶</a></dt>
<dd><p>Tossed during Route exceptions</p>
</dd></dl>

<dl class="exception">
<dt id="routes.util.MatchException">
<em class="property">exception </em><code class="descclassname">routes.util.</code><code class="descname">MatchException</code><a class="headerlink" href="#routes.util.MatchException" title="Permalink to this definition">¶</a></dt>
<dd><p>Tossed during URL matching exceptions</p>
</dd></dl>

<dl class="exception">
<dt id="routes.util.GenerationException">
<em class="property">exception </em><code class="descclassname">routes.util.</code><code class="descname">GenerationException</code><a class="headerlink" href="#routes.util.GenerationException" title="Permalink to this definition">¶</a></dt>
<dd><p>Tossed during URL generation exceptions</p>
</dd></dl>

<dl class="class">
<dt id="routes.util.URLGenerator">
<em class="property">class </em><code class="descclassname">routes.util.</code><code class="descname">URLGenerator</code><span class="sig-paren">(</span><em>mapper</em>, <em>environ</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util.URLGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL Generator generates URL&#8217;s</p>
<p>It is automatically instantiated by the RoutesMiddleware and put
into the <code class="docutils literal"><span class="pre">wsgiorg.routing_args</span></code> tuple accessible as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span> <span class="o">=</span> <span class="n">environ</span><span class="p">[</span><span class="s1">&#39;wsgiorg.routing_args&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Or via the <code class="docutils literal"><span class="pre">routes.url</span></code> key:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span> <span class="o">=</span> <span class="n">environ</span><span class="p">[</span><span class="s1">&#39;routes.url&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The url object may be instantiated outside of a web context for use
in testing, however sub_domain support and fully qualified URL&#8217;s
cannot be generated without supplying a dict that must contain the
key <code class="docutils literal"><span class="pre">HTTP_HOST</span></code>.</p>
<p>Instantiate the URLGenerator</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">mapper</span></code></dt>
<dd>The mapper object to use when generating routes.</dd>
<dt><code class="docutils literal"><span class="pre">environ</span></code></dt>
<dd>The environment dict used in WSGI, alternately, any dict
that contains at least an <code class="docutils literal"><span class="pre">HTTP_HOST</span></code> value.</dd>
</dl>
<dl class="method">
<dt id="routes.util.URLGenerator.current">
<code class="descname">current</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util.URLGenerator.current" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a route that includes params used on the current
request</p>
<p>The arguments for this method are identical to <code class="docutils literal"><span class="pre">__call__</span></code>
except that arguments set to None will remove existing route
matches of the same name from the set of arguments used to
construct a URL.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="routes.util.url_for">
<code class="descclassname">routes.util.</code><code class="descname">url_for</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a URL</p>
<p>All keys given to url_for are sent to the Routes Mapper instance for
generation except for:</p>
<div class="highlight-python"><div class="highlight"><pre>anchor          specified the anchor name to be appened to the path
host            overrides the default (current) host if provided
protocol        overrides the default (current) protocol if provided
qualified       creates the URL with the host/port information as
                needed
</pre></div>
</div>
<p>The URL is generated based on the rest of the keys. When generating a new
URL, values will be used from the current request&#8217;s parameters (if
present). The following rules are used to determine when and how to keep
the current requests parameters:</p>
<ul class="simple">
<li>If the controller is present and begins with &#8216;/&#8217;, no defaults are used</li>
<li>If the controller is changed, action is set to &#8216;index&#8217; unless otherwise
specified</li>
</ul>
<p>For example, if the current request yielded a dict of
{&#8216;controller&#8217;: &#8216;blog&#8217;, &#8216;action&#8217;: &#8216;view&#8217;, &#8216;id&#8217;: 2}, with the standard
&#8216;:controller/:action/:id&#8217; route, you&#8217;d get the following results:</p>
<div class="highlight-python"><div class="highlight"><pre>url_for(id=4)                    =&gt;  &#39;/blog/view/4&#39;,
url_for(controller=&#39;/admin&#39;)     =&gt;  &#39;/admin&#39;,
url_for(controller=&#39;admin&#39;)      =&gt;  &#39;/admin/view/2&#39;
url_for(action=&#39;edit&#39;)           =&gt;  &#39;/blog/edit/2&#39;,
url_for(action=&#39;list&#39;, id=None)  =&gt;  &#39;/blog/list&#39;
</pre></div>
</div>
<p><strong>Static and Named Routes</strong></p>
<p>If there is a string present as the first argument, a lookup is done
against the named routes table to see if there&#8217;s any matching routes. The
keyword defaults used with static routes will be sent in as GET query
arg&#8217;s if a route matches.</p>
<p>If no route by that name is found, the string is assumed to be a raw URL.
Should the raw URL begin with <code class="docutils literal"><span class="pre">/</span></code> then appropriate SCRIPT_NAME data will
be added if present, otherwise the string will be used as the url with
keyword args becoming GET query args.</p>
</dd></dl>

<dl class="function">
<dt id="routes.util._url_quote">
<code class="descclassname">routes.util.</code><code class="descname">_url_quote</code><span class="sig-paren">(</span><em>string</em>, <em>encoding</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util._url_quote" title="Permalink to this definition">¶</a></dt>
<dd><p>A Unicode handling version of urllib.quote.</p>
</dd></dl>

<dl class="function">
<dt id="routes.util._str_encode">
<code class="descclassname">routes.util.</code><code class="descname">_str_encode</code><span class="sig-paren">(</span><em>string</em>, <em>encoding</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util._str_encode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="routes.util._screenargs">
<code class="descclassname">routes.util.</code><code class="descname">_screenargs</code><span class="sig-paren">(</span><em>kargs</em>, <em>mapper</em>, <em>environ</em>, <em>force_explicit=False</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util._screenargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Private function that takes a dict, and screens it against the current
request dict to determine what the dict should look like that is used.
This is responsible for the requests &#8220;memory&#8221; of the current.</p>
</dd></dl>

<dl class="function">
<dt id="routes.util._subdomain_check">
<code class="descclassname">routes.util.</code><code class="descname">_subdomain_check</code><span class="sig-paren">(</span><em>kargs</em>, <em>mapper</em>, <em>environ</em><span class="sig-paren">)</span><a class="headerlink" href="#routes.util._subdomain_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Screen the kargs for a subdomain and alter it appropriately depending
on the current subdomain or lack therof.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">routes.util</span></code> &#8211; URL Generator and utility functions</a><ul>
<li><a class="reference internal" href="#module-contents">Module Contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="middleware.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">routes.middleware</span></code> &#8211; Routes WSGI Middleware</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/modules/util.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="middleware.html" title="routes.middleware – Routes WSGI Middleware"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Routes 1.13 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Routes Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2005-2015, Ben Bangert, Mike Orr.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>